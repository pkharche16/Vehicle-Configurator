{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pkhar\\\\Desktop\\\\CDAC-DAC-2k24\\\\Project\\\\vehicle_configurator_front_end_spring_boot\\\\src\\\\components\\\\SignInForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"../Contexts/AuthContext\";\nimport { Alert } from 'react-st-modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SignInForm() {\n  _s();\n  const [state, setState] = useState({});\n  const [signedIn, setSignedIn] = useState(false);\n  const {\n    setIsLogged\n  } = useContext(AuthContext);\n  const [email, setEmail] = useState('');\n  const handleChange = evt => {\n    const value = evt.target.value;\n    setState({\n      ...state,\n      [evt.target.name]: value\n    });\n  };\n  const handleOnSubmit = evt => {\n    evt.preventDefault();\n    fetch(\"http://localhost:8081/api/login\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(state)\n    }).then(response => {\n      console.log(response);\n      return response.json();\n    }).then(loginSuccess => {\n      console.log(\"Login success==>:\", loginSuccess);\n      loginSuccess && setIsLogged(true);\n      if (loginSuccess) Alert(`Welcome ${state.username}`);else Alert(`INVALID ENTRY`);\n    }).catch(error => {\n      console.error(\"Login failed:\", error);\n    });\n    const {\n      username,\n      password\n    } = state;\n    for (const key in state) {\n      setState({\n        ...state,\n        [key]: \"\"\n      });\n    }\n    fetch(\"http://localhost:8081/api/\" + username, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => {\n      console.log(response);\n      return response.json();\n    }).then(data => {\n      localStorage.setItem(\"userId\", data);\n      console.log(\"data==>\", data);\n    }).catch(error => {\n      console.error(\"Login failed:\", error);\n    });\n  };\n  const handleForgotPassword = async () => {\n    const email = prompt(\"Please enter your email:\");\n    if (email) {\n      await sendPasswordResetRequest(email);\n    }\n  };\n  const sendPasswordResetRequest = async email => {\n    try {\n      const response = await fetch(`http://localhost:8081/api/forgot-password?email=${encodeURIComponent(email)}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (response.ok) {\n        Alert(\"Password reset email sent!\");\n      } else {\n        Alert(\"Failed to send password reset email.\");\n      }\n    } catch (error) {\n      console.error(\"Password reset request failed:\", error);\n      Alert(\"An error occurred. Please try again later.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container sign-in-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleOnSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"Enter Username\",\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Enter Password\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        onClick: handleForgotPassword,\n        children: \"Forgot your password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n_s(SignInForm, \"mLEX3bBVN1duakt+JgIp+y2eTAs=\");\n_c = SignInForm;\nexport default SignInForm;\nvar _c;\n$RefreshReg$(_c, \"SignInForm\");","map":{"version":3,"names":["React","useState","useContext","AuthContext","Alert","jsxDEV","_jsxDEV","SignInForm","_s","state","setState","signedIn","setSignedIn","setIsLogged","email","setEmail","handleChange","evt","value","target","name","handleOnSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","console","log","json","loginSuccess","username","catch","error","password","key","data","localStorage","setItem","handleForgotPassword","prompt","sendPasswordResetRequest","encodeURIComponent","ok","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","required","href","onClick","_c","$RefreshReg$"],"sources":["C:/Users/pkhar/Desktop/CDAC-DAC-2k24/Project/vehicle_configurator_front_end_spring_boot/src/components/SignInForm.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../Contexts/AuthContext\";\r\nimport { Alert } from 'react-st-modal';\r\n\r\nfunction SignInForm() {\r\n  const [state, setState] = useState({});\r\n  const [signedIn, setSignedIn] = useState(false);\r\n  const { setIsLogged } = useContext(AuthContext);\r\n  const [email, setEmail] = useState('');\r\n\r\n  const handleChange = (evt) => {\r\n    const value = evt.target.value;\r\n    setState({\r\n      ...state,\r\n      [evt.target.name]: value,\r\n    });\r\n  };\r\n\r\n  const handleOnSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    fetch(\"http://localhost:8081/api/login\", {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(state),\r\n    })\r\n      .then((response) => {\r\n        console.log(response);\r\n        return response.json();\r\n      })\r\n      .then((loginSuccess) => {\r\n        console.log(\"Login success==>:\", loginSuccess);\r\n\r\n        loginSuccess && setIsLogged(true);\r\n        if(loginSuccess) Alert(`Welcome ${state.username}`); \r\n        else Alert(`INVALID ENTRY`);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Login failed:\", error);\r\n      });\r\n\r\n    const { username, password } = state;\r\n    \r\n    for (const key in state) {\r\n      setState({\r\n        ...state,\r\n        [key]: \"\",\r\n      });\r\n    }\r\n    fetch(\"http://localhost:8081/api/\" + username, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        console.log(response);\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        localStorage.setItem(\"userId\", data);\r\n        console.log(\"data==>\", data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Login failed:\", error);\r\n      });\r\n  };\r\n\r\n  const handleForgotPassword = async () => {\r\n    const email = prompt(\"Please enter your email:\");\r\n    if (email) {\r\n      await sendPasswordResetRequest(email);\r\n    }\r\n  };\r\n\r\n  const sendPasswordResetRequest = async (email) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8081/api/forgot-password?email=${encodeURIComponent(email)}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        Alert(\"Password reset email sent!\");\r\n      } else {\r\n        Alert(\"Failed to send password reset email.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Password reset request failed:\", error);\r\n      Alert(\"An error occurred. Please try again later.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-container sign-in-container\">\r\n      <form onSubmit={handleOnSubmit}>\r\n        <h1>Sign in</h1>\r\n        <br />\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          placeholder=\"Enter Username\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Enter Password\"\r\n          onChange={handleChange}\r\n        />\r\n        <a href=\"#\" onClick={handleForgotPassword}>Forgot your password?</a>\r\n        <button>Sign In</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignInForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}